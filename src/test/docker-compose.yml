version: '3.8'

services:
  activemq:
    image: quay.io/nebulous/activemq-broker:main-6fec14a4c8f88b09a6274ff43584b40ab592f697-20240701174743
    container_name: nebulous-activemq
    environment:
      ACTIVEMQ_NAME: activemq
      ACTIVEMQ_PASSWORD: nebulous
      ACTIVEMQ_USERNAME: admin
    ports:
      - "8161:8161"
      - "61616:61616"
      - "5672:5672"
    restart: always
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "61616"]
      interval: 10s
      timeout: 1s
      retries: 3
      start_period: 10s
    labels:
      app.kubernetes.io/instance: nebulous-activemq
      app.kubernetes.io/name: nebulous-activemq
